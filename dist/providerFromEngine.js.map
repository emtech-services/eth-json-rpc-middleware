{"version":3,"file":"providerFromEngine.js","sourceRoot":"","sources":["../src/providerFromEngine.ts"],"names":[],"mappings":";;;;;;AACA,sFAA4D;AAG5D,SAAgB,kBAAkB,CAChC,MAAqB;IAErB,MAAM,QAAQ,GAA6B,IAAI,4BAAgB,EAA8B,CAAC;IAC9F,+BAA+B;IAC/B,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChD,QAAQ,CAAC,IAAI,GAAG,CAAC,GAA6B,EAAE,QAAgD,EAAE,EAAE;QAClG,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;YAClC,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;SAC5D;QACD,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC/B,CAAC,CAAC;IACF,wBAAwB;IACxB,IAAI,MAAM,CAAC,EAAE,EAAE;QACb,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,OAAe,EAAE,EAAE;YAC5C,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;KACJ;IACD,OAAO,QAAQ,CAAC;AAClB,CAAC;AAnBD,gDAmBC","sourcesContent":["import { JsonRpcEngine, JsonRpcRequest } from 'json-rpc-engine';\nimport SafeEventEmitter from '@metamask/safe-event-emitter';\nimport { SafeEventEmitterProvider } from './utils/cache';\n\nexport function providerFromEngine(\n  engine: JsonRpcEngine,\n): SafeEventEmitterProvider {\n  const provider: SafeEventEmitterProvider = new SafeEventEmitter() as SafeEventEmitterProvider;\n  // handle both rpc send methods\n  provider.sendAsync = engine.handle.bind(engine);\n  provider.send = (req: JsonRpcRequest<string[]>, callback: (error: any, providerRes: any) => void) => {\n    if (typeof callback !== 'function') {\n      throw new Error('Must provide callback to \"send\" method.');\n    }\n    engine.handle(req, callback);\n  };\n  // forward notifications\n  if (engine.on) {\n    engine.on('notification', (message: string) => {\n      provider.emit('data', null, message);\n    });\n  }\n  return provider;\n}\n"]}